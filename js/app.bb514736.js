(function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},a={app:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/AgoraProof/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"07f9":function(e,t,n){"use strict";n("787c")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Home",{attrs:{msg:"Agora Basic Video Call"}})],1)},i=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[e._m(0),n("div",{staticClass:"agora-box"},[n("div",{staticClass:"agora-input"},[n("div",{staticClass:"agora-text"},[e._v("Appid")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.option.appid,expression:"option.appid"}],attrs:{placeholder:"Appid",clearable:""},domProps:{value:e.option.appid},on:{input:function(t){t.target.composing||e.$set(e.option,"appid",t.target.value)}}})]),n("div",{staticClass:"agora-input"},[n("div",{staticClass:"agora-text"},[e._v("Token")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.option.token,expression:"option.token"}],attrs:{placeholder:"Token",clearable:""},domProps:{value:e.option.token},on:{input:function(t){t.target.composing||e.$set(e.option,"token",t.target.value)}}})]),n("div",{staticClass:"agora-input"},[n("div",{staticClass:"agora-text"},[e._v("Nombre del canal")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.option.channel,expression:"option.channel"}],attrs:{placeholder:"Channel Name",clearable:""},domProps:{value:e.option.channel},on:{input:function(t){t.target.composing||e.$set(e.option,"channel",t.target.value)}}})]),n("div",{staticClass:"agora-button"},[n("button",{attrs:{type:"primary",disabled:e.disableJoin},on:{click:e.joinEvent}},[e._v("Ingresar")]),n("button",{attrs:{type:"primary",plain:"",disabled:!e.disableJoin},on:{click:e.leaveEvent}},[e._v("Salir")]),n("button",{attrs:{type:"primary"},on:{click:e.prooveAxios}},[e._v("Obtener Credenciales")])])]),n("div",{staticClass:"agora-view"},[n("div",{staticClass:"agora-video"},[e.localStream?n("StreamPlayer",{attrs:{stream:e.localStream,domId:e.localStream.getId()}}):e._e()],1),e._l(e.remoteStreams,(function(e,t){return n("div",{key:t,staticClass:"agora-video"},[n("StreamPlayer",{attrs:{stream:e,domId:e.getId()}})],1)}))],2)])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"agora-title-box"},[n("div",{staticClass:"agora-title"},[e._v("SimulaciÃ³n Videollamada con Agora")])])}],l=(n("4de4"),n("7db0"),n("96cf"),n("1da1")),c=(n("a15b"),n("d3b7"),n("d4ec")),u=n("bee2"),d=n("6b5f"),p=n.n(d),m=n("faa1"),f=n.n(m),v=function(){function e(){Object(c["a"])(this,e),this.option={appId:"",channel:"",uid:"",token:""},this.client=null,this.localStream=null,this._eventBus=new f.a}return Object(u["a"])(e,[{key:"joinChannel",value:function(e){var t=this;return new Promise((function(n,o){t.client=p.a.createClient({mode:"rtc",codec:"vp8"}),t.client.init(e.appid,(function(){console.log("init success"),t.clientListener(),t.client.join(e.token?e.token:null,e.channel,null,(function(o){console.log("join channel: "+t.option.channel+" success, uid: ",o),t.option={appid:e.appid,token:e.token,channel:e.channel,uid:o},n()}),(function(e){console.error("client join failed",e)}))}),(function(e){o(e),console.error(e)})),console.log("[agora-vue] appId",e.appid)}))}},{key:"publishStream",value:function(){var e=this;return new Promise((function(t,n){e.localStream=p.a.createStream({streamID:e.option.uid,audio:!0,video:!0,screen:!1}),e.localStream.init((function(){console.log("init local stream success"),t(e.localStream),e.client.publish(e.localStream,(function(e){console.log("publish failed"),console.error(e)}))}),(function(e){n(e),console.error("init local stream failed ",e)}))}))}},{key:"clientListener",value:function(){var e=this,t=this.client;t.on("stream-added",(function(t){e._eventBus.emit("stream-added",t)})),t.on("stream-subscribed",(function(t){e._eventBus.emit("stream-subscribed",t)})),t.on("stream-removed",(function(t){e._eventBus.emit("stream-removed",t)})),t.on("peer-online",(function(t){e._eventBus.emit("peer-online",t)})),t.on("peer-leave",(function(t){e._eventBus.emit("peer-leave",t)}))}},{key:"on",value:function(e,t){this._eventBus.on(e,t)}},{key:"leaveChannel",value:function(){var e=this;return new Promise((function(t,n){e.client.unpublish(e.localStream,(function(e){console.log(e)})),e.client.leave((function(){e.localStream.isPlaying()&&e.localStream.stop(),e.localStream.close(),e.client=null,t(),console.log("client leaves channel success")}),(function(e){n(e),console.log("channel leave failed"),console.error(e)}))}))}}]),e}(),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"player",staticClass:"agora-video-player",attrs:{id:e.domId}})},g=[],b={name:"stream-player",props:["stream","domId"],mounted:function(){this.$nextTick((function(){this.stream&&!this.stream.isPlaying()&&this.stream.play("".concat(this.domId),{fit:"cover"},(function(e){e&&"aborted"!==e.status&&console.warn("trigger autoplay policy")}))}))},beforeDestroy:function(){this.stream&&(this.stream.isPlaying()&&this.stream.stop(),this.stream.close())}},y=b,S=(n("07f9"),n("2877")),_=Object(S["a"])(y,h,g,!1,null,null,null),k=_.exports,j=n("bc3a"),w=n.n(j),C=console.log.bind(console),x={components:{StreamPlayer:k},data:function(){return{option:{appid:"",token:"",uid:null,channel:""},disableJoin:!1,localStream:null,remoteStreams:[],appId:"",token:"",channel:""}},props:{msg:String},methods:{prooveAxios:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={specialistUUID:"119e6645-ff41-4c15-8178-10d5f9e5775b"},t.next=3,w.a.post("/videocalling",n);case 3:o=t.sent,console.log(o.data),e.option.appid=o.data.appId,e.option.token=o.data.token,e.option.channel=o.data.channel;case 8:case"end":return t.stop()}}),t)})))()},joinEvent:function(){var e=this;this.option.appid?this.option.channel?(this.rtc.joinChannel(this.option).then((function(){e.rtc.publishStream().then((function(t){e.localStream=t})).catch((function(e){C("publish local error",e)}))})).catch((function(e){C("join channel error",e)})),this.disableJoin=!0):this.judge("Channel Name"):this.judge("Appid")},leaveEvent:function(){this.disableJoin=!1,this.rtc.leaveChannel().then((function(){})).catch((function(e){C("leave error",e)})),this.localStream=null,this.remoteStreams=[]},judge:function(e){this.$notify({title:"Notice",message:"Please enter the ".concat(e),position:"top-left",type:"warning"})}},created:function(){var e=this;this.rtc=new v;var t=this.rtc;t.on("stream-added",(function(e){var n=e.stream;C("[agora] [stream-added] stream-added",n.getId()),t.client.subscribe(n)})),t.on("stream-subscribed",(function(t){var n=t.stream;C("[agora] [stream-subscribed] stream-added",n.getId()),e.remoteStreams.find((function(e){return e.getId()===n.getId()}))||e.remoteStreams.push(n)})),t.on("stream-removed",(function(t){var n=t.stream;C("[agora] [stream-removed] stream-removed",n.getId()),e.remoteStreams=e.remoteStreams.filter((function(e){return e.getId()!==n.getId()}))})),t.on("peer-online",(function(e){console.log(e)})),t.on("peer-leave",(function(t){e.remoteStreams=e.remoteStreams.filter((function(e){return e.getId()!==t.uid}))}))}},I=x,P=(n("c30c"),Object(S["a"])(I,r,s,!1,null,"30789d02",null)),O=P.exports,$={name:"App",components:{Home:O}},A=$,B=(n("034f"),Object(S["a"])(A,a,i,!1,null,null,null)),E=B.exports;w.a.defaults.baseURL="http://proofofconcept-env.eba-tcvjpjdm.us-east-1.elasticbeanstalk.com",o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(E)}}).$mount("#app")},"787c":function(e,t,n){},"7cc9":function(e,t,n){},"85ec":function(e,t,n){},c30c:function(e,t,n){"use strict";n("7cc9")}});
//# sourceMappingURL=app.bb514736.js.map